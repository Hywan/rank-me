{% extends "base.html" %}

{% load static i18n ago %}

{% block body_class %}home{% endblock %}

{% block sidebar %}
    {{ block.super }}

    <div class="box">
        <h4 class="box__title">{% trans "Your competitions" %}</h4>
        <ul class="list-group">
            {% for competition in competitions %}
            <li class="list-group-item">
                <a href="{% url "competition_detail" competition_slug=competition.slug %}">
                    <span class="pull-right text-muted">{rank}</span>
                    {{ competition }}
                </a>
            </li>
            {% empty %}
                <p><a href="{% url "competition_list_all" %}">{% trans "Browse competitions to join" %}</a></p>
            {% endfor %}
        </ul>
    </div>
{% endblock %}


{% block content %}
<header class="page-header">
    <h1>{% trans "Recent activity" %}</h1>
</header>

<ul class="timeline list list-unstyled">
    {% for event in events %}
        {% ifchanged event.date|ago %}
            <li class="timeline-date"><h4>{{ event.date | ago }}</h4></li>
        {% endifchanged %}
        <li class="timeline-event">
            {% with template_name=event.event_type|add:".html" %}
                {% include "timeline/events/_"|add:template_name %}
            {% endwith %}
        </li>
    {% endfor %}
</ul>
{% endblock %}
