{% load i18n static game_extras %}
<!DOCTYPE html>
<html>
<head>
    <title>Rank-me</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static "css/main.css" %}" rel="stylesheet" media="screen">
    <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600" rel="stylesheet" type="text/css">
</head>
<body class="{% block body_class %}{% endblock %}">
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid wrapper--default">
            <div class="navbar-header">
                {% if user and user.is_authenticated %}
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                {% endif %}
                <a class="navbar-brand" href="/">Rank-me</a>
            </div>

            {% if user and user.is_authenticated %}
            <div class="collapse navbar-collapse" id="main-navbar">
                <ul class="nav navbar-nav navbar-right">
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span class="glyphicon glyphicon-tower icon-spaced-right"></span>
                            {% trans "Competitions" %}
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            {% competitions_list %}
                            <li class="divider"></li>
                            <li><a href="{% url "competition_list_all" %}">{% trans "All competitions" %}</a></li>
                            <li class="divider"></li>
                            <li><a href="{% url "competition_add" %}">{% trans "Create new..." %}</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <span class="glyphicon glyphicon-user icon-spaced-right"></span>
                            <span id="nav-user-name">{{ user.get_profile.get_full_name }}</span>
                            <!-- {% include 'game/_player_avatar.html' with user=user %} -->
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            <li><a href="{% url 'profile' %}">{% trans "Profile" %}</a></li>
                            <li><a href="{% url 'edit_profile' %}">{% trans "Account settings" %}</a></li>
                            <li class="divider"></li>
                            <li><a href="{% url 'auth_logout' %}">{% trans "Log out" %}</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            {% endif %}
        </div>
    </nav>

    <div class="app container-fluid wrapper--default">
        <div class="messages">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">{{ message }}</div>
            {% endfor %}
        </div>

        {% block content %}{% endblock %}
    </div>

    <script type="text/javascript">
        var appDatas = {
            "user_id": "{{ user.id }}",
            "username": "{{ user.username }}",
            "fullname": "{{ user.get_profile.get_full_name }}"
        };
    </script>

    <!-- Ze Javascript -->
    <script type="text/javascript" src="{% static "vendors/requirejs/require.js" %}" data-main="{% static "js/main.js" %}"></script>
</body>
</html>
